!function(n){var o={};function a(e){if(o[e])return o[e].exports;var t=o[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,a),t.l=!0,t.exports}a.m=n,a.c=o,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)a.d(n,o,function(e){return t[e]}.bind(null,o));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=332)}({332:function(e,t,n){n(333),e.exports=n(93)},333:function(e,t,n){},93:function(e,t,n){"use strict";n.r(t);var a=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}();var o=wp.components,h=o.RadioControl,d=o.ServerSideRender,b=(o.Panel,o.PanelBody),y=(o.PanelRow,o.SelectControl),m=o.Spinner,v=o.RangeControl,k=o.CheckboxControl,w=wp.i18n.__,r=wp.element,_=r.Fragment,s=r.Component,S=wp.editor.InspectorControls,i=wp.apiFetch;var l=function(e){function o(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t=o.__proto__||Object.getPrototypeOf(o)).call.apply(t,[this].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(e))));return n.props=e,n.state={displayOption:"all"!==e.attributes.content&&"current"!==e.attributes.content?"other":n.props.attributes.content,content:[],type:e.attributes.type&&"1"!==e.attributes.all?e.attributes.type:"",loading:!1,packages:[]},"1"===e.attributes.all&&(n.state.displayOption="all"),n.get_content=n.get_content.bind(n),n.get_packages=n.get_packages.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,s),a(o,[{key:"componentDidMount",value:function(){this.state.type&&"all"!==this.state.displayOption&&this.get_content(this.state.type),this.get_packages()}},{key:"get_packages",value:function(){var t=this;fetch(ss_blocks.ajax,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"},body:"action=ss_get_packages&nonce="+ss_blocks.nonce,credentials:"same-origin"}).then(function(e){return e.json()}).then(function(e){e.success&&t.setState({packages:e.data})})}},{key:"get_content",value:function(t){var n=this,e=t;"post"!==t&&"page"!==t||(e=t+"s"),this.setState({loading:!0}),i({path:"/wp/v2/"+e}).then(function(e){n.setState({content:e,type:t,loading:!1})})}},{key:"render",value:function(){var t=this,e=[{label:w("Select a Content"),value:"current"}],n=[{label:w("Select a Content Type"),value:""}],o=[{label:w("Select a Package"),value:0}],a=this.state,r=a.content,s=a.displayOption,i=a.type,l=a.loading,c=this.props,p=c.attributes,u=c.setAttributes,f=p.col||2;e=r.length?e.concat(r.map(function(e){return{label:e.title.rendered,value:e.id}})):[];var g=Object.keys(ss_blocks.content_types).map(function(e){return{label:ss_blocks.content_types[e],value:e}});return n=n.concat(g),o=this.state.packages.length?o.concat(this.state.packages.map(function(e){return{label:e.title,value:e.ID}})):[],wp.element.createElement(_,null,wp.element.createElement(S,null,wp.element.createElement(b,{title:w("Display Options"),initialOpen:!0},wp.element.createElement(h,{label:w("Show"),help:w("What Sponsors to show"),selected:s,options:[{label:w("All Sponsors"),value:"all"},{label:w("Sponsors that sponsored this Content"),value:"current"},{label:w("Sponsors that sponsored other Content"),value:"other"}],onChange:function(e){t.setState({displayOption:e}),"all"===e&&u({all:"1"}),"current"===e&&u({all:"0",content:function(){var e=window.location.search.replace("?","").split("&").map(function(e){var t=e.split("=");return{tag:t[0],value:t[1]}}),t="current";if(e.length)for(var n in e){var o=e[n];"post"===o.tag&&(t=o.value)}return t}()})}}),"other"===s&&[wp.element.createElement(y,{label:w("Content Type"),value:i,options:n,onChange:function(e){e?(t.get_content(e),u({type:e})):(t.setState({content:[],type:e}),u({type:e,all:"0",content:"current"}))}}),wp.element.createElement("div",null,wp.element.createElement(y,{label:w("Content"),value:p.content,options:e,onChange:function(e){u({all:"0",content:e})}}),l&&wp.element.createElement(m,null))],wp.element.createElement(v,{label:w("Columns"),value:f,onChange:function(e){u({col:e})},min:1,max:5}),wp.element.createElement(k,{heading:w("Link Sponsors"),label:w("If unchecked, it will not link sponsors."),checked:1===parseInt(p.link_sponsor),onChange:function(e){u(e?{link_sponsor:"1"}:{link_sponsor:"0"})}}),wp.element.createElement(k,{heading:w("Hide Title?"),checked:1===parseInt(p.hide_title),onChange:function(e){u(e?{hide_title:"1"}:{hide_title:"0"})}})),wp.element.createElement(b,{title:w("Package"),initialOpen:!1},wp.element.createElement(y,{label:w("Choose a Package"),value:p.package,options:o,onChange:function(e){u({package:e})}}))),wp.element.createElement(d,{block:"simple-sponsorships/sponsors",attributes:p}))}}]),o}(),c=wp.blocks.registerBlockType,p=wp.i18n.__;c("simple-sponsorships/sponsors",{title:p("Sponsors"),description:p("Show all sponsors or for a specific content"),icon:"awards",category:"simple-sponsorships",attributes:{all:{type:"string",default:"0"},content:{type:"string",default:"current"},logo:{type:"string",default:"1"},text:{type:"string",default:"1"},package:{type:"string",default:"0"},type:{type:"string",default:""},col:{type:"number",default:2},link_sponsor:{type:"string",default:"1"},hide_title:{type:"string",default:"0"}},edit:l,save:function(){return null}});var u=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}();var f=wp.components,g=f.RadioControl,O=f.ServerSideRender,C=f.PanelBody,E=f.RangeControl,P=f.SelectControl,j=f.Toolbar,T=wp.i18n.__,x=wp.element,A=x.Fragment,I=x.Component,D=wp.editor.InspectorControls,R=(wp.apiFetch,function(e){function o(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t=o.__proto__||Object.getPrototypeOf(o)).call.apply(t,[this].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(e))));return n.props=e,n.state={packages:[],button:e.attributes.button,id:e.attributes.id,heading:e.attributes.heading||"h2"},n.get_packages=n.get_packages.bind(n),n.changeHeading=n.changeHeading.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,I),u(o,[{key:"componentDidMount",value:function(){this.get_packages()}},{key:"createLevelControl",value:function(e,t,n){return{icon:"heading",title:sprintf(T("Heading %d"),e),isActive:e===t,onClick:function(){return n(e)},subscript:String(e)}}},{key:"changeHeading",value:function(e){(0,this.props.setAttributes)({heading:"h"+e}),this.setState({heading:"h"+e})}},{key:"get_packages",value:function(){var t=this;fetch(ss_blocks.ajax,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"},body:"action=ss_get_packages&nonce="+ss_blocks.nonce,credentials:"same-origin"}).then(function(e){return e.json()}).then(function(e){e.success&&t.setState({packages:e.data})})}},{key:"render",value:function(){var t=this,e=[{label:T("Select a Package"),value:0}],n=this.props,o=n.attributes,a=n.setAttributes,r=this.state,s=r.button,i=(r.id,o.col||1);e=this.state.packages.length?e.concat(this.state.packages.map(function(e){return{label:e.title,value:e.ID}})):[];var l=parseInt(this.state.heading.replace("h",""));return wp.element.createElement(A,null,wp.element.createElement(D,null,wp.element.createElement(C,{title:T("Display Options"),initialOpen:!1},wp.element.createElement(P,{label:T("Choose a Package"),value:o.id,options:e,onChange:function(e){a({id:e}),t.setState({id:e})}}),wp.element.createElement(g,{label:T("Show Purchase Button?"),selected:s,options:[{value:"0",label:T("No")},{value:"1",label:T("Yes")}],onChange:function(e){a({button:e}),t.setState({button:e})}}),wp.element.createElement("p",null,T("Package Title")),wp.element.createElement(j,{controls:[1,2,3,4,5,6].map(function(e){return t.createLevelControl(e,l,t.changeHeading)})}),wp.element.createElement(E,{label:T("Columns"),value:i,onChange:function(e){a({col:e})},min:1,max:5}))),wp.element.createElement(O,{block:"simple-sponsorships/packages",attributes:o}))}}]),o}()),B=wp.blocks.registerBlockType,F=wp.i18n.__;B("simple-sponsorships/packages",{title:F("Packages"),description:F("Show all or a specific package"),icon:"awards",category:"simple-sponsorships",attributes:{id:{type:"string",default:"0"},button:{type:"string",default:"0"},col:{type:"number",default:1}},transforms:{from:[{type:"shortcode",tag:"ss_packages",attributes:{id:{type:"string",shortcode:function(e){var t=e.named.id;return void 0===t?"0":t}},button:{type:"string",shortcode:function(e){var t=e.named.button;return void 0===t?"0":t}}}}]},edit:R,save:function(){return null}});var M=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}();var H=wp.components,L=H.ServerSideRender,N=H.FormTokenField,W=H.PanelBody,Y=wp.i18n.__,q=wp.element,z=q.Fragment,G=q.Component,J=wp.editor.InspectorControls,K=function(e){function o(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t=o.__proto__||Object.getPrototypeOf(o)).call.apply(t,[this].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(e))));return n.props=e,n.state={suggestions:null,packages:[],button:e.attributes.button,id:e.attributes.id,ids:e.attributes.packages.split(","),selected:[]},n.get_packages=n.get_packages.bind(n),n.getSuggetions=n.getSuggetions.bind(n),n.changeTokens=n.changeTokens.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,G),M(o,[{key:"componentDidMount",value:function(){this.get_packages()}},{key:"get_packages",value:function(){var o=this;fetch(ss_blocks.ajax,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"},body:"action=ss_get_packages&nonce="+ss_blocks.nonce,credentials:"same-origin"}).then(function(e){return e.json()}).then(function(e){if(e.success){var t=e.data,n=t.map(function(e){return 0<=o.state.ids.indexOf(e.ID)&&e.title}).filter(Boolean);o.setState({packages:t,selected:n})}})}},{key:"changeTokens",value:function(e){var o=this,a=[],r=[];e.forEach(function(e){for(var t=0;t<o.state.packages.length;t++){var n=o.state.packages[t];if(n.title===e){a.push(n.ID),r.push(e);break}}});var t=a.join(",");this.setState({ids:a,selected:r}),this.props.setAttributes({packages:t})}},{key:"getSuggetions",value:function(){if(null===this.state.suggestions&&(0===this.state.packages.length&&this.get_packages(),0<this.state.packages.length)){var e;e=this.state.packages.map(function(e){return e.title}),this.setState({suggestions:e})}}},{key:"render",value:function(){var t=this,e=[{label:Y("Show All"),value:0}],n=this.props.attributes,o=this.state,a=o.suggestions,r=o.selected,s=this.state.ids;return e=this.state.packages.length?e.concat(this.state.packages.map(function(e){return{label:e.title,value:e.ID}})):[],s.length&&(s=s.filter(function(e){return!!e})),wp.element.createElement(z,null,wp.element.createElement(J,null,wp.element.createElement(W,{title:Y("Display Options"),initialOpen:!1},wp.element.createElement(N,{label:Y("Choose Package(s) that can be sponspored. Leave Empty for all."),value:r,onChange:function(e){t.changeTokens(e)},onInputChange:function(e){t.getSuggetions()},suggestions:a}))),wp.element.createElement(L,{block:"simple-sponsorships/form-sponsor",attributes:n}))}}]),o}(),Q=wp.blocks.registerBlockType,U=wp.i18n.__;Q("simple-sponsorships/form-sponsor",{title:U("Form - Sponsor"),description:U("Show a form for sponsoring content"),icon:"awards",category:"simple-sponsorships",attributes:{packages:{type:"string",default:""}},edit:K,save:function(){return null}})}});
//# sourceMappingURL=gutenberg.js.map